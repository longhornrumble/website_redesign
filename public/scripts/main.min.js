const SCROLL_THRESHOLD=50,SWIPE_THRESHOLD=50,ANIMATION_DURATION=1500,FADE_IN_THRESHOLD=.1,SETUP_ANIMATION_THRESHOLD=.2;document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("header"),t=document.getElementById("logo-default"),n=document.getElementById("logo-scrolled");function s(){window.scrollY>50?(e?.classList.add("scrolled"),t?.classList.add("hidden"),n?.classList.remove("hidden")):(e?.classList.remove("scrolled"),t?.classList.remove("hidden"),n?.classList.add("hidden"))}window.addEventListener("scroll",s),s();const a=document.getElementById("mobile-menu-btn"),o=document.getElementById("mobile-menu"),l=document.querySelectorAll(".mobile-nav-link");function r(){a?.classList.remove("open"),o?.classList.remove("open"),a?.setAttribute("aria-expanded","false"),a?.focus()}a&&o&&(a.setAttribute("aria-expanded","false"),a.setAttribute("aria-controls","mobile-menu"),a.addEventListener("click",()=>{a.classList.contains("open")?r():function(){a?.classList.add("open"),o?.classList.add("open"),a?.setAttribute("aria-expanded","true");const e=o?.querySelector("a");e?.focus()}()}),l.forEach(e=>{e.addEventListener("click",r)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&a.classList.contains("open")&&r()}),o.addEventListener("keydown",e=>{if("Tab"!==e.key)return;const t=o.querySelectorAll("a[href], button:not([disabled])"),n=t[0],s=t[t.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),s?.focus()):e.shiftKey||document.activeElement!==s||(e.preventDefault(),n?.focus())}));document.querySelectorAll(".faq-btn").forEach(e=>{e.addEventListener("click",()=>{if(window.innerWidth<768){const t=e.closest(".faq-item");t?.classList.toggle("open")}})});const i=document.getElementById("billing-monthly"),d=document.getElementById("billing-annual"),c=document.getElementById("standard-price"),u=document.getElementById("premium-price"),m=document.getElementById("standard-billing-note"),h=document.getElementById("premium-billing-note"),L=document.getElementById("standard-cta"),g=document.getElementById("premium-cta-save"),b=document.getElementById("billing-message");function v(e){i?.setAttribute("aria-checked",(!e).toString()),d?.setAttribute("aria-checked",e.toString()),e?(c&&(c.textContent="120"),u&&(u.textContent="240"),m?.classList.remove("hidden"),h?.classList.remove("hidden"),L&&(L.textContent="Get Started â€” Save 20%"),g?.classList.remove("hidden"),b&&(b.textContent="Billed annually. Switch to monthly anytime."),d?.classList.add("bg-emerald-500","text-white"),d?.classList.remove("text-slate-600","hover:text-slate-900"),i?.classList.remove("bg-emerald-500","text-white"),i?.classList.add("text-slate-600","hover:text-slate-900")):(c&&(c.textContent="150"),u&&(u.textContent="300"),m?.classList.add("hidden"),h?.classList.add("hidden"),L&&(L.textContent="Get Started"),g?.classList.add("hidden"),b&&(b.textContent="Billed monthly. Switch to annual anytime."),i?.classList.add("bg-emerald-500","text-white"),i?.classList.remove("text-slate-600","hover:text-slate-900"),d?.classList.remove("bg-emerald-500","text-white"),d?.classList.add("text-slate-600","hover:text-slate-900"))}i&&d&&(i.setAttribute("role","radio"),i.setAttribute("aria-checked","true"),d.setAttribute("role","radio"),d.setAttribute("aria-checked","false"),i.addEventListener("click",()=>v(!1)),d.addEventListener("click",()=>v(!0)),[i,d].forEach(e=>{e.addEventListener("keydown",e=>{if("ArrowLeft"===e.key||"ArrowRight"===e.key){e.preventDefault();document.activeElement===i?(d.focus(),v(!0)):(i.focus(),v(!1))}})}));const f=document.querySelectorAll(".checkout-btn");let y=!1;i&&d&&(i.addEventListener("click",()=>{y=!1}),d.addEventListener("click",()=>{y=!0})),f.forEach(e=>{e.addEventListener("click",async()=>{const t=y?e.dataset.planAnnual:e.dataset.planMonthly;e.disabled=!0;const n=e.innerHTML;e.innerHTML="Redirecting...";try{const e=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:t})}),n=await e.json();if(!n.url)throw new Error(n.error||"Failed to create checkout");window.location.href=n.url}catch(t){console.error("Checkout error:",t),e.innerHTML=n,e.disabled=!1,alert("Something went wrong. Please try again.")}})});const E=document.querySelectorAll(".carousel-tab"),w=document.querySelectorAll(".carousel-slide"),A=document.querySelectorAll("[data-indicator]"),p=document.getElementById("carousel-slides"),x=w.length||3;let I=0,k=null;function S(e){I=e,E.forEach((t,n)=>{const s=n===e;t.setAttribute("aria-selected",s.toString()),t.setAttribute("tabindex",s?"0":"-1"),s?(t.classList.add("bg-emerald-500","text-white","shadow-lg","shadow-emerald-500/25"),t.classList.remove("bg-slate-800","text-slate-400","hover:bg-slate-700","hover:text-white")):(t.classList.remove("bg-emerald-500","text-white","shadow-lg","shadow-emerald-500/25"),t.classList.add("bg-slate-800","text-slate-400","hover:bg-slate-700","hover:text-white"))}),A.forEach((t,n)=>{n===e?(t.classList.add("w-8","bg-emerald-500"),t.classList.remove("w-2","bg-slate-700")):(t.classList.remove("w-8","bg-emerald-500"),t.classList.add("w-2","bg-slate-700"))}),w.forEach((t,n)=>{n===e?(t.classList.remove("hidden"),t.setAttribute("aria-hidden","false"),B(t)):(t.classList.add("hidden"),t.setAttribute("aria-hidden","true"))})}function B(e){e.querySelectorAll(".counter").forEach(e=>{const t=parseFloat(e.dataset.target),n=parseInt(e.dataset.decimals)||0;isNaN(t)||t<0?console.warn("Invalid counter target:",e.dataset.target):(e.textContent="0",function(e,t,n=1500,s=0){let a=0;const o=t/(n/16),l=setInterval(()=>{a+=o,a>=t?(e.textContent=s>0?t.toFixed(s):Math.floor(t).toLocaleString(),clearInterval(l)):e.textContent=s>0?a.toFixed(s):Math.floor(a).toLocaleString()},16)}(e,t,1500,n))})}E.forEach((e,t)=>{e.setAttribute("role","tab"),e.setAttribute("aria-selected",0===t?"true":"false"),e.setAttribute("tabindex",0===t?"0":"-1"),e.addEventListener("click",()=>S(t)),e.addEventListener("keydown",e=>{let t=I;"ArrowLeft"===e.key?(e.preventDefault(),t=(I-1+x)%x):"ArrowRight"===e.key?(e.preventDefault(),t=(I+1)%x):"Home"===e.key?(e.preventDefault(),t=0):"End"===e.key&&(e.preventDefault(),t=x-1),t!==I&&(S(t),E[t]?.focus())})}),w.forEach((e,t)=>{e.setAttribute("role","tabpanel"),e.setAttribute("aria-hidden",0===t?"false":"true")}),p&&(p.addEventListener("touchstart",e=>{k=e.touches[0].clientX}),p.addEventListener("touchend",e=>{if(!k)return;const t=e.changedTouches[0].clientX,n=k-t;Math.abs(n)>50&&(S(n>0?(I+1)%x:(I-1+x)%x),setTimeout(()=>{document.getElementById("slide-eyebrow")?.scrollIntoView({behavior:"smooth",block:"start"})},50)),k=null})),w.length>0&&B(w[0]);const T=document.querySelectorAll(".fade-in"),D=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.style.transitionDelay||"0ms",n=parseInt(t);setTimeout(()=>{e.target.classList.add("visible")},n)}})},{threshold:.1});T.forEach(e=>D.observe(e));const C=document.getElementById("setup"),q=document.querySelectorAll(".setup-dot");if(C&&q.length>0){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(q.forEach(e=>{const t=e.dataset.delay||"0s";e.style.animation="sequentialPulse 11s infinite",e.style.animationDelay=t}),e.unobserve(t.target))})},{threshold:.2});e.observe(C)}});